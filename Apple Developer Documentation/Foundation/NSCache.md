# NSCache

**제네릭 클래스** | 리소스가 부족할 때 제거될 일시적인 키-값 쌍을 임시로 저장하기 위해 사용하는 가변 컬렉션

---

## 선언

```swift
class NSCache<KeyType, ObjectType> : NSObject where KeyType : AnyObject, ObjectType : AnyObject
```

## 개요

캐시 오브젝트는 몇 가지 점에서 다른 가변 컬렉션과 다르다.

- `NSCache` 클래스는 다양한 자동 제거 정책을 실현하며, 이는 캐시가 너무 많은 시스템 메로리를 사용하지 않도록 한다. 다른 애플리케이션이 메모리를 필요로 한다면, 이러한 정책들은 캐시에서 몇몇 아이템을 제거하여, 그것의 메모리 사용량을 최소화한다.
- 캐시에 락을 걸 필요 없이 다른 스레드에서 캐시에 아이템을 추가하거나 제거할 수 있고, 질의할 수 있다.
- `NSMutableDictionary` 오브젝트와는 다르게, 캐시는 그것에 추가되는 키 오브젝트를 복사하지 않는다.

일반적으로 생성하는데 비용이 많이 드는, 일시 데이터를 갖는 오브젝트를 일시적으로 저장하기 위해 `NSCache` 오브젝트를 사용한다. 이러한 오브젝트를 다시 사용하는 것으로 성능상의 이점을 취할 수 있는데, 그 값들이 다시 계산될 필요가 없기 때문이다. 그러나 그 오브젝트들은 애플리케이션에게 있어서 중요하지 않고 메모리가 부족하다면 버려질 수 있다. 버려진다면 그 값들은 필요할 때 다시 계산될 수 있을 것이다.

사용되지 않을 때 버려질 수 있는 하위 컴포넌트를 가진 오브젝트들은 `NSDiscardableContent` 프로토콜을 채택하여 캐시 제거 행위를 향상시킬 수 있다. 기본적으로 캐시에 있는 `NSDiscardableContent` 오브젝트들은 그 컨텐츠가 버려진다면 자동으로 제거되며, 이러한 자동 제거 정책이 변경될 수 있을 지라도 그렇다. `NSDiscardableObject` 오브젝트가 캐시에 들어간다면, 캐시는 그것의 제거에 있어서 `discardContentIfPossible()`을 호출한다.
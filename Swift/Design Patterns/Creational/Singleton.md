# Singleton

### 싱글턴 패턴

> 싱글턴 패턴은 특정 클래스에 대하여 오직 하나의 객체만 생성되는 것을 보장한다. 싱글턴 클래스에 대한 모든 이후 참조들은 같은 기반 인스턴스를 참조한다. 애플리케이션이 거의 없고, 이 패턴을 과도하게 사용하지 마라.

생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이며, 최초 생성 이후에 호출된 생성자는 최초의 생성자가 생성한 객체를 반환한다.

애플리케이션에서 오직 하나의 객체만 존재하는 것을 보장한다.

### 코드

Swift에서는 일반적으로 `shared` 프로퍼티를 정의하여 싱글턴 객체를 참조한다.

```swift
final class ElonMusk {
  static let shared = ElonMusk()
  
  // private 접근 수준을 갖는 이니셜라이저를 정의하여 사용 시점에서 이니셜라이저를 호출하지 못하도록 한다.
  private init() { }
}

/* 사용 */

let elon = ElonMusk.shared
```

---

### 장점

- 고정된 한 곳의 메모리 영역을 취하여 메모리 낭비를 방지할 수 있음
- 전역 인스턴스이므로 다른 곳에서 사용하기 쉬움 (== 데이터 공유가 용이함)
- 두 번째 사용부터는 객체 로딩 시간이 줄어 성능상 이점을 취함

### 단점

- 싱글톤 객체의 편리성에 너무 많은 데이터나 작업을 담당하게 하는 경우 다른 인스턴스 간 결합도가 높아져 OCP 위반
  - 유지보수 힘듬, 테스트 어려움
- 멀티 쓰레드 환경에서 동기화 처리를 하지 않으면 인스턴스가 하나 이상 생성될 위험이 있음